define(["underscore.custom","backbone.custom"],function(e,t){return{vote:function(n){var r=this;n===void 0&&(n=!0),url=e.result(this,"url");var i=t.callApi("post",url+"/vote",{id:this.id,up:n});return i.success(function(e){r.set("points",e.data.points)}),i},unvote:function(){var n=this;url=e.result(this,"url");var r=t.callApi("post",url+"/unvote",{id:this.id});return r.success(function(e){n.set("points",e.data.points)}),r},hasVoted:function(){return this.get("user_vote")!==null}}});