define(["underscore.custom","marionette.custom","vendors/select2"],function(e,t){var n=t.ItemView.extend({template:function(){},maximumSelectionSize:5,placeholder:e.t("at least 1 tag, maxium 5 tags"),tokenSeparators:[","," "],onRender:function(){var n=this;this.$el.select2({tags:!0,initSelection:function(e,t){var n=[];$(e.val().split(",")).each(function(){n.push({id:this,text:this})}),t(n)},tokenSeparators:t.getOption(this,"tokenSeparators"),maximumSelectionSize:t.getOption(this,"maximumSelectionSize"),placeholder:t.getOption(this,"placeholder"),createSearchChoice:function(e,t){if($(t).filter(function(){return this.text.localeCompare(e)===0}).length===0)return{id:e,text:e}},ajax:{url:"/api/tags/autocomplete",dataType:"json",data:function(e,t){return{query:e}},results:function(t,n){var r=[];return e.each(t.data,function(e){r.push({id:e.name,text:e.name})}),{results:r}}}}),this.$el.on("change",function(e){n.trigger("change",n.getValue())});var r=this.options.values||[];e.isArray(r)||(r=[r]),r.length>0&&this.setValue(r)},getValue:function(){return this.$el.select2("val")},setValue:function(e){return e.length==0?this:(this.$el.select2("val",e),this)},show:function(){this.$el.select2("container").show()},hide:function(){this.$el.select2("container").hide()}});return n});