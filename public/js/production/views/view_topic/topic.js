define(["marionette.custom","libs/rivets"],function(e,t){var n=e.ItemView.extend({template:"#topic-template",className:"topic",events:{"click .js-vote-up":"onVoteUp","click .js-vote-down":"onVoteDown"},initialize:function(){},ui:{tags:".js-tags",content:".js-content",author:".js-author",sidebar:".js-sidebar",votePoints:".js-vote-points",voteUp:".js-vote-up",voteDown:".js-vote-down",commentCount:".js-comment-count",viewCount:".js-view-count"},serializeData:function(){return{model:this.model}},onRender:function(){var e=this;t.bind(this.$el,{model:this.model})},onVoteUp:function(e){var t=$(e.currentTarget);this._vote(!0,t)},onVoteDown:function(e){var t=$(e.currentTarget);this._vote(!1,t)},_vote:function(e,t){var n=t.hasClass("voted");this.$(".voted").removeClass("voted"),n?this.model.unvote().success(function(){}):this.model.vote(e).success(function(){t.addClass("voted")})}});return n});